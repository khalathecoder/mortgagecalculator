<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>DREAM HOUSE: A Coding Challenge by Khala Wright</title>

    <!-- Bootstrap CSS - stylesheets always go in head tag-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
      crossorigin="anonymous"
    />

    <!-- GOOGLE FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Allan:wght@400;700&family=Bebas+Neue&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />

    <!-- DEVICON -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css"
    />

    <!-- BOOTSTRAP icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/site.css" />
    <!-- Prism CSS -->
    <link rel="stylesheet" href="/css/prism.css" />
  </head>

  <body class="bgImage">
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark" id="mainNav">
        <div class="container">
          <a class="navbar-brand" href="/index.html">
            <img src="/img/mortgageloancalc -headerimg.png" height="60" />
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" href="/index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/app.html">The App</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/code.html"
                  >The Code</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https://github.com/khalathecoder/mortgagecalculator"
                  target="_blank"
                  >The Repo</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https://khalawright.dev"
                  target="_blank"
                  >Portfolio</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main class="container mt-3">
      <h1 class="border-bottom border-2 border-dark">The Code</h1>
      <div class="row">
        <div class="col-lg-12 col-12">
          <pre class="line-numbers">
                    <code class="language-js">
//validate if numbers are positive and if are actual numeric values
function validate() {

    let loanAmount = document.getElementById('loanAmount').value;
    let term = document.getElementById('term').value;
    let interestRate = document.getElementById('interestRate').value;

    // checks to see if number is less than 0 or not a number at all; runs through all entered values.
    if (loanAmount <= 0 || isNaN(Number(loanAmount))) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Please enter a valid loan amount.',
            });
        document.loan-form.loanAmount.value;
    } else if (term <= 0 || isNaN(Number(loanAmount))) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Please enter a valid term.',
            });
        document.loan-form.term.value;
    } else if (interestRate <= 0 || isNaN(Number(interestRate))) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Please enter a valid interest rate.',
            });
        document.loan-form.interestRate.value;
    } else {
        calculate(parseFloat(loanAmount), parseInt(term), parseFloat(interestRate));
    }
    } 
//formula to calculate monthly payment
function calculate(loanAmount, term, interestRate) {
    i = interestRate/100;
let mortgage = (loanAmount) * (i/12) / (1 - Math.pow(1 + (i/12), -term));

mortgage.toFixed(2); 

// formulas
let loanAmountDec = loanAmount.toFixed(2).toLocaleString();
let totalCost = (mortgage * term).toFixed(2);
let totalInterest = (totalCost - loanAmount).toFixed(2);

//principle, total interest and total cost displayed on calculate submit
let result="";

result += `&lt;table>`;
result += `&lt;tr>&lt;th>Total Principle:&lt;/th>`;
result += `&lt;td>&emsp;&emsp;${loanAmountDec}&lt;/td>&lt;/tr>`;
    
result += `&lt;tr>&lt;th>Total Interest:&lt;/th>`;
result += `&lt;td>&emsp;&emsp;${totalInterest}&lt;/td>&lt;/tr>`;

result += `&lt;tr>&lt;th>Total Cost:&lt;/th>`;
result += `&lt;td>&emsp;&emsp;${totalCost}&lt;/td>&lt;/tr>`;

result += `&lt;/table>`;

document.getElementById('loan-info').innerHTML = result;

// single payment below Your monthly payments header
let singlePayment = "";
singlePayment += `&lt;h4>$${mortgage.toFixed(2)}&lt;/h4>`;
document.getElementById('monthlyPayment').innerHTML = singlePayment;

//table rows
let table="";

table += `&lt;table class="table table-striped w-auto">`;
table += `&lt;tr>`;
    table += `&lt;td>&lt;/td>`;
    table += `&lt;td>&lt;/td>`;
    table += `&lt;td>&lt;/td>`;
    table += `&lt;td>&lt;/td>`;
    table += `&lt;td>&lt;/td>`;
    table += `&lt;td>&lt;/td>`;
table += `&lt;/tr>`;

let currentBalance = loanAmount;
let paymentCounter = 1;
let interestPaid = 0;

while(currentBalance > 1) {
    //formulas
    towardsInterest = (i/12) * currentBalance;
    towardsBalance = mortgage - towardsInterest;
    interestPaid = interestPaid + towardsInterest;
    currentBalance = currentBalance - towardsBalance;


    //build table for data
    table += `&lt;tr>`;
        table += `&lt;td>${paymentCounter}&lt;/td>`;
        table += `&lt;td>${mortgage.toFixed(2)}&lt;/td>`;
        table += `&lt;td>${towardsBalance.toFixed(2)}&lt;/td>`;
        table += `&lt;td>${towardsInterest.toFixed(2)}&lt;/td>`;
        table += `&lt;td>${interestPaid.toFixed(2)}&lt;/td>`;
        table += `&lt;td>${currentBalance.toFixed(2)}&lt;/td>`;
    table += `&lt;/tr>`;

    paymentCounter++;
}
table += `&lt;/table>`;

//display results
document.getElementById('table').innerHTML = table;
} 
                    </code>
                </pre>
        </div>
      </div>
    </main>

    <footer class="py-3">
      <div class="container">
        <div
          class="row row-cols-1 row-cols-md-3 align-items-center text-center"
        >
          <div class="col">
            <img src="/img/kw-white-initials.png" height="50" />
          </div>
          <div class="col text-light text-md-end">
            <a
              href="https://www.linkedin.com/in/khala-wright-3662b2266/"
              class="text-light"
              target="blank"
              ><i class="socialicons bi bi-linkedin p-2"></i
            ></a>
            <a
              href="https://github.com/khalathecoder"
              class="text-light"
              target="blank"
              ><i class="socialicons bi bi-github p-2"></i
            ></a>
          </div>
          <div class="col text-light order-md-first text-md-start">
            &copy; 2023 Khala Wright
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
      crossorigin="anonymous"
    ></script>

    <script src="/js/prism.js"></script>
    <script>
      Prism.plugins.NormalizeWhitespace.setDefaults({
        "remove-trailing": true,
        "remove-indent": true,
        "left-trim": true,
        "right-trim": true,
      });
    </script>
  </body>
</html>
